<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Clases y Objetos</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="Manual de PHP"
HREF="index.html"><LINK
REL="UP"
TITLE="Referencia del Lenguaje"
HREF="langref.html"><LINK
REL="PREVIOUS"
TITLE="Funciones internas (incorporadas)"
HREF="functions.internal.html"><LINK
REL="NEXT"
TITLE="Explicando las Referencias"
HREF="language.references.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=ISO-8859-1"></HEAD
><BODY
CLASS="chapter"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Manual de PHP</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="functions.internal.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="language.references.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="chapter"
><H1
><A
NAME="language.oop"
>Capítulo 13. Clases y Objetos</A
></H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Tabla de contenidos</B
></DT
><DT
><A
HREF="language.oop.html#keyword.class"
><VAR
CLASS="literal"
>class</VAR
></A
></DT
></DL
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="keyword.class"
><VAR
CLASS="literal"
>class</VAR
></A
></H1
><P
>&#13;    Una clase es una colección de variables y de funciones que acceden a esas
    variables. Una clase se define con la siguiente sintaxis:
 
    <DIV
CLASS="informalexample"
><P
></P
><A
NAME="AEN4453"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#007700">class </font><font color="#0000BB">Cart </font><font color="#007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;var </font><font color="#0000BB">$items</font><font color="#007700">;&nbsp;&nbsp;</font><font color="#FF8000">// Items en nuestro carro de la compra<br />&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;// Añadir $num artículos de tipo $artnr al carro<br /> <br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function </font><font color="#0000BB">add_item </font><font color="#007700">(</font><font color="#0000BB">$artnr</font><font color="#007700">, </font><font color="#0000BB">$num</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">items</font><font color="#007700">[</font><font color="#0000BB">$artnr</font><font color="#007700">] += </font><font color="#0000BB">$num</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">// Sacar $num artículos del tipo $artnr del carro<br /> <br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">function </font><font color="#0000BB">remove_item </font><font color="#007700">(</font><font color="#0000BB">$artnr</font><font color="#007700">, </font><font color="#0000BB">$num</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">items</font><font color="#007700">[</font><font color="#0000BB">$artnr</font><font color="#007700">] &gt; </font><font color="#0000BB">$num</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$this</font><font color="#007700">-&gt;</font><font color="#0000BB">items</font><font color="#007700">[</font><font color="#0000BB">$artnr</font><font color="#007700">] -= </font><font color="#0000BB">$num</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return </font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return </font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD
></TR
></TABLE
><P
></P
></DIV
>
   </P
><P
>&#13;    El ejemplo define una clase llamada Cart que consiste en un array 
asociativo de artículos en el carro y dos funciones para meter y sacar ítems del carro
   </P
><P
>&#13;    Las clases son tipos, es decir, son plantillas para variables. Tienes que crear una variable del 
    tipo deseado con el operador new.
   </P
><DIV
CLASS="informalexample"
><P
></P
><A
NAME="AEN4457"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
$cart = new Cart;<br /> $cart-&gt;add_item("10", 1);</font>
</code></TD
></TR
></TABLE
><P
></P
></DIV
><P
>&#13;Este ejemplo crea un objeto $cart de clase Cart. La función add_item() de ese objeto se llama para añadir un 
item del artículo número 10 al carro. </P
><P
> Las Clases pueden ser extensiones de otras clases.
Las clases extendidas o derivadas tienen todas las variables y funciones de la clase base y lo que les añadas
al extender la definición. La herencia múltiple no está soportada.
   </P
><DIV
CLASS="informalexample"
><P
></P
><A
NAME="AEN4461"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
class Named_Cart extends Cart {<br />&nbsp;&nbsp;&nbsp;&nbsp;var $owner;<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;function set_owner ($name) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;owner = $name;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</font>
</code></TD
></TR
></TABLE
><P
></P
></DIV
><P
>&#13;Ese ejemplo define una clase Named_Cart (carro con nombre o dueño) que tiene todas las variables
y funciones de Cart, y además añade la variable $owner y una función adicional set_owner().
Un carro con nombre se crea de la forma habitual y, una vez hecho, puedes acceder al 
propietario del carro. En los carros con nombre también puedes acceder a las funciones normales del carro:
   </P
><DIV
CLASS="informalexample"
><P
></P
><A
NAME="AEN4464"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
$ncart = new Named_Cart;&nbsp;&nbsp;&nbsp;&nbsp;// Creamos un carro con nombre<br />$ncart-&gt;set_owner ("kris"); // Nombramos el carro<br />print $ncart-&gt;owner;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Imprimimos el nombre del propietario<br />$ncart-&gt;add_item ("10", 1); // Funcionalidad heredada de Cart</font>
</code></TD
></TR
></TABLE
><P
></P
></DIV
><P
>&#13;Entre funciones de una clase, la variable $this hace referencia al 
propio objeto. Tienes que usar $this-&#62;loquesea para acceder a una variable
o función llamada loquesea del objeto actual.
   </P
><P
>&#13;Los constructores son funciones de una clase que se llaman automáticamente
al crear una nueva instancia (objeto) de una clase. Una función se convierte
en constructor cuando tiene el mismo nombre que la clase.
   </P
><DIV
CLASS="informalexample"
><P
></P
><A
NAME="AEN4468"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
class Auto_Cart extends Cart {<br />&nbsp;&nbsp;&nbsp;&nbsp;function Auto_Cart () {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;add_item ("10", 1);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</font>
</code></TD
></TR
></TABLE
><P
></P
></DIV
><P
>&#13;Este ejemplo define una clase Auto_Cart que es un Cart junto con un constructor
que inicializa el carro con un item del tipo de artículo "10" cada vez que se
crea un nuevo Auto_Cart con "new". Los constructores también pueden recibir parámetros
y estos parámetros pueden ser opcionales, lo que los hace más útiles.
   </P
><DIV
CLASS="informalexample"
><P
></P
><A
NAME="AEN4471"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
class Constructor_Cart extends Cart {<br />&nbsp;&nbsp;&nbsp;&nbsp;function Constructor_Cart ($item = "10", $num = 1) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;add_item ($item, $num);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /> <br />// Compramos las mismas cosas aburridas de siempre<br /> <br />$default_cart&nbsp;&nbsp;&nbsp;= new Constructor_Cart;<br /> <br />// Compramos las cosas interesantes<br /> <br />$different_cart = new Constructor_Cart ("20", 17);</font>
</code></TD
></TR
></TABLE
><P
></P
></DIV
><DIV
CLASS="caution"
><P
></P
><TABLE
CLASS="caution"
BORDER="1"
WIDTH="100%"
><TR
><TD
ALIGN="CENTER"
><B
>Atención</B
></TD
></TR
><TR
><TD
ALIGN="LEFT"
><P
>&#13;Para las clases derivadas, el constructor de la clase padre no es llamado automáticamente cuando 
se llama al constructor de la clase derivada.
    </P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="functions.internal.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="language.references.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Funciones internas (incorporadas)</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="langref.html"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Explicando las Referencias</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>