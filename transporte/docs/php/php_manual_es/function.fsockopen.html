<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>fsockopen</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="Manual de PHP"
HREF="index.html"><LINK
REL="UP"
TITLE="Funciones de Red"
HREF="ref.network.html"><LINK
REL="PREVIOUS"
TITLE="dns_get_record"
HREF="function.dns-get-record.html"><LINK
REL="NEXT"
TITLE="gethostbyaddr"
HREF="function.gethostbyaddr.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=ISO-8859-1"></HEAD
><BODY
CLASS="refentry"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Manual de PHP</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="function.dns-get-record.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="function.gethostbyaddr.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="function.fsockopen"
></A
>fsockopen</H1
><DIV
CLASS="refnamediv"
><A
NAME="AEN69714"
></A
><P
>    (PHP 3, PHP 4 , PHP 5)</P
>fsockopen&nbsp;--&nbsp;
     Abrir una conexión de sockets de dominio de Internet o
     Unix
    </DIV
><DIV
CLASS="refsect1"
><A
NAME="AEN69717"
></A
><H2
>Descripción</H2
>resource <B
CLASS="methodname"
>fsockopen</B
> ( string destino, int puerto [, int errno [, string errstr [, float tiempo_espera]]])<BR
></BR
><P
>&#13;     Inicia una conexión a través de sockets con el
     recurso especificado por
     <VAR
CLASS="parameter"
>destino</VAR
>. <VAR
CLASS="literal"
>PHP</VAR
> soporta el
     uso de destinos en los dominios de Internet y Unix, tal y como se
     describe en <A
HREF="transports.html"
>Apéndice N</A
>. Una lista de
     transportes soportados puede recuperarse usando
     <A
HREF="function.stream-get-transports.html"
><B
CLASS="function"
>stream_get_transports()</B
></A
>.
    </P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Nota: </B
>
      Si necesita establecer un tiempo de espera para la
      lectura/escritura de datos a través del socket, use
      <A
HREF="function.stream-set-timeout.html"
><B
CLASS="function"
>stream_set_timeout()</B
></A
>, dado que el
      parámetro <VAR
CLASS="parameter"
>tiempo_espera</VAR
> de
      <B
CLASS="function"
>fsockopen()</B
> sólo se aplica cuando se
      conecta con el socket.
     </P
></BLOCKQUOTE
></DIV
><P
>&#13;     A partir de PHP 4.3.0, si ha compilado el soporte para OpenSSL,
     usted puede usar un prefijo sobre el
     <VAR
CLASS="parameter"
>nombre_host</VAR
>, ya sea
     '<VAR
CLASS="literal"
>ssl://</VAR
>' o '<VAR
CLASS="literal"
>tls://</VAR
>' para
     usar una conexión de cliente SSL o TLS sobre TCP/IP para
     conectarse con el host remoto.
    </P
><P
>&#13;     <B
CLASS="function"
>fsockopen()</B
> devuelve un apuntador de archivo
     el cual puede ser usado junto con otras funciones de archivos
     (como <A
HREF="function.fgets.html"
><B
CLASS="function"
>fgets()</B
></A
>, <A
HREF="function.fgetss.html"
><B
CLASS="function"
>fgetss()</B
></A
>,
     <A
HREF="function.fwrite.html"
><B
CLASS="function"
>fwrite()</B
></A
>, <A
HREF="function.fclose.html"
><B
CLASS="function"
>fclose()</B
></A
>, y
     <A
HREF="function.feof.html"
><B
CLASS="function"
>feof()</B
></A
>).
    </P
><P
>&#13;     Si la llamada falla, devolverá <TT
CLASS="constant"
><B
>FALSE</B
></TT
>, y si los
     argumentos opcionales <VAR
CLASS="parameter"
>errno</VAR
> y
     <VAR
CLASS="parameter"
>errstr</VAR
> están presentes,
     serán modificados para indicar el error de nivel de
     sistema real que ocurrió en la llamada de sistema
     <VAR
CLASS="literal"
>connect()</VAR
>. Si el valor devuelto en
     <VAR
CLASS="parameter"
>errno</VAR
> es <VAR
CLASS="literal"
>0</VAR
> y la
     función devolvió <TT
CLASS="constant"
><B
>FALSE</B
></TT
>, es un indicio de que el
     error ocurrió antes de la llamada a
     <VAR
CLASS="literal"
>connect()</VAR
>. Lo más probable es que esto
     se deba a un problema con la inicialización del
     socket. Note que los argumentos <VAR
CLASS="parameter"
>errno</VAR
> y
     <VAR
CLASS="parameter"
>errstr</VAR
> siempre serán pasados por
     referencia.
    </P
><P
>&#13;     Dependiendo del entorno, el dominio Unix o el tiempo de espera de
     conexión opcional pueden no estar disponibles.
    </P
><P
>&#13;     El socket será abierto por defecto en modo de
     bloqueo. Puede cambiar a modo de no-bloqueo usando
     <A
HREF="function.stream-set-blocking.html"
><B
CLASS="function"
>stream_set_blocking()</B
></A
>.
     <TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN69772"
></A
><P
><B
>Ejemplo 1. Ejemplo de <B
CLASS="function"
>fsockopen()</B
></B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
<font color="#0000BB">&lt;?php<br />$da </font><font color="#007700">= </font><font color="#0000BB">fsockopen</font><font color="#007700">(</font><font color="#DD0000">"www.example.com"</font><font color="#007700">, </font><font color="#0000BB">80</font><font color="#007700">, </font><font color="#0000BB">$errno</font><font color="#007700">, </font><font color="#0000BB">$errstr</font><font color="#007700">, </font><font color="#0000BB">30</font><font color="#007700">);<br />if (!</font><font color="#0000BB">$da</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"$errstr ($errno)&lt;br /&gt;</font><font color="#007700">\n</font><font color="#DD0000">"</font><font color="#007700">;<br />} else {<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$salida </font><font color="#007700">= </font><font color="#DD0000">"GET / HTTP/1.1\r\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$salida </font><font color="#007700">.= </font><font color="#DD0000">"Host: www.example.com\r\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$salida </font><font color="#007700">.= </font><font color="#DD0000">"Connection: Close\r\n\r\n"</font><font color="#007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">fwrite</font><font color="#007700">(</font><font color="#0000BB">$da</font><font color="#007700">, </font><font color="#0000BB">$salida</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;while (!</font><font color="#0000BB">feof</font><font color="#007700">(</font><font color="#0000BB">$da</font><font color="#007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#0000BB">fgets</font><font color="#007700">(</font><font color="#0000BB">$da</font><font color="#007700">, </font><font color="#0000BB">128</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">fclose</font><font color="#007700">(</font><font color="#0000BB">$da</font><font color="#007700">);<br />}<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
>
     El ejemplo a continuación presenta la forma de recuperar
     la fecha y hora desde el servicio UDP "daytime" (puerto 13) en su
     propia máquina.
     <TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN69776"
></A
><P
><B
>Ejemplo 2. Uso de una conexión UDP</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
<font color="#0000BB">&lt;?php<br />$da </font><font color="#007700">= </font><font color="#0000BB">fsockopen</font><font color="#007700">(</font><font color="#DD0000">"udp://127.0.0.1"</font><font color="#007700">, </font><font color="#0000BB">13</font><font color="#007700">, </font><font color="#0000BB">$errno</font><font color="#007700">, </font><font color="#0000BB">$errstr</font><font color="#007700">);<br />if (!</font><font color="#0000BB">$da</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#DD0000">"ERROR: $errno - $errstr&lt;br /&gt;</font><font color="#007700">\n</font><font color="#DD0000">"</font><font color="#007700">;<br />} else {<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">fwrite</font><font color="#007700">(</font><font color="#0000BB">$da</font><font color="#007700">, </font><font color="#DD0000">"\n"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#0000BB">fread</font><font color="#007700">(</font><font color="#0000BB">$da</font><font color="#007700">, </font><font color="#0000BB">26</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">fclose</font><font color="#007700">(</font><font color="#0000BB">$da</font><font color="#007700">);<br />}<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
>
     <DIV
CLASS="warning"
><P
></P
><TABLE
CLASS="warning"
BORDER="1"
WIDTH="100%"
><TR
><TD
ALIGN="CENTER"
><B
>Aviso</B
></TD
></TR
><TR
><TD
ALIGN="LEFT"
><P
>&#13;       En ocasiones, los sockets UDP parecerán haber sido
       abiertos sin errores, incluso si el host remoto no puede ser
       contactado. El error sólo se percibirá cuando lea
       o escriba datos hacia/desde el socket. La razón es que
       UDP es un protocolo "sin conexión", lo que quiere decir
       que el sistema operativo no intenta establecer un enlace con el
       socket hasta que necesite realmente enviar o recibir datos.
      </P
></TD
></TR
></TABLE
></DIV
>
     <DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Nota: </B
>Cuando se especifique una
dirección numérica IPv6 (p.ej. fe80::1) se debe incluir
la IP entre corchetes. Por ejemplo
<VAR
CLASS="literal"
>tcp://[fe80::1]:80</VAR
>.</P
></BLOCKQUOTE
></DIV
>
     <DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Nota: </B
>
       El parámetro de tiempo de espera fue introducido en PHP
       3.0.9 y el soporte para UDP fue añadido en PHP 4.
      </P
></BLOCKQUOTE
></DIV
>
     Vea también <A
HREF="function.pfsockopen.html"
><B
CLASS="function"
>pfsockopen()</B
></A
>, 
     <A
HREF="function.stream-set-blocking.html"
><B
CLASS="function"
>stream_set_blocking()</B
></A
>,
     <A
HREF="function.stream-set-timeout.html"
><B
CLASS="function"
>stream_set_timeout()</B
></A
>, <A
HREF="function.fgets.html"
><B
CLASS="function"
>fgets()</B
></A
>,
     <A
HREF="function.fgetss.html"
><B
CLASS="function"
>fgetss()</B
></A
>, <A
HREF="function.fwrite.html"
><B
CLASS="function"
>fwrite()</B
></A
>,
     <A
HREF="function.fclose.html"
><B
CLASS="function"
>fclose()</B
></A
>, <A
HREF="function.feof.html"
><B
CLASS="function"
>feof()</B
></A
>, y
     la <A
HREF="ref.curl.html"
>extensión Curl</A
>.
    </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="function.dns-get-record.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="function.gethostbyaddr.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>dns_get_record</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="ref.network.html"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>gethostbyaddr</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>